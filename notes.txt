const { GenerateSW } = require('workbox-webpack-plugin');

module.exports = {
  modify: (config, { target }) =>
    target === 'web'
      ? {
          ...config,
          plugins: [
            ...config.plugins,
            new GenerateSW({
              swDest: 'sw.js',
              clientsClaim: true,
              skipWaiting: true,
              runtimeCaching: [
                {
                  urlPattern: new RegExp('https://kalkulator-plate.surge.sh'),
                  handler: 'cacheFirst'
                }
              ]
            })
          ]
        }
      : config
};
